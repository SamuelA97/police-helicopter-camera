(()=>{"use strict";var e={847:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.turnOnCamera=t.turnOffCamera=t.watchCamera=t.cameraIsTurnedOn=void 0;const n=o(832);let i=!1,r=null,a=null,s=75,l=null;function c(e){i&&(ClearTimecycleModifier(),SetScaleformMovieAsNoLongerNeeded(r),RenderScriptCams(!1,!1,0,!0,!1),DestroyCam(a,!1),(0,n.hideNui)(),i=!1,r=null,a=null,e||PlaySoundFrontend(-1,"Off","GTAO_Vision_Modes_SoundSet",!1))}function d(e){if(i||!(0,n.isInSupportedHelicopter)()||!(0,n.seatIsAllowedToUseCamera)())return;e||PlaySoundFrontend(-1,"Recharged","DLC_AW_Machine_Gun_Ammo_Counter_Sounds",!1),SetTimecycleModifier("heliGunCam"),SetTimecycleModifierStrength(.3),r=RequestScaleformMovie("HELI_CAM");const t=(0,n.getHelicopter)();a=CreateCam("DEFAULT_SCRIPTED_FLY_CAMERA",!0),AttachCamToEntity(a,t,0,0,-1.5,!0),SetCamFov(a,70),SetCamRot(a,0,0,GetEntityHeading(t),2),RenderScriptCams(!0,!1,0,!0,!1),(0,n.showNuiWithCameraTooltip)(),i=!0}t.cameraIsTurnedOn=function(){return i},t.watchCamera=function(){if(!(0,n.isInSupportedHelicopter)())return void c(!0);(0,n.hideHud)(),function(){const e=GetDisabledControlNormal(0,220),t=GetDisabledControlNormal(0,221),o=GetCamRot(a,2),n=o[2]+-1*e*12*.25,i=Math.max(Math.min(20,o[0]+-1*t*12*.25),-89.5);SetCamRot(a,i,0,n,2)}(),(IsControlJustReleased(0,241)||IsControlJustReleased(0,242))&&function(){let e=5;const t=GetCamFov(a);IsControlJustReleased(0,241)?e=t+.3*(Math.min(s-5,75)-t):IsControlJustReleased(0,242)&&(e=t+.3*(Math.min(s+5,75)-t)),Math.abs(e-t)<.3&&(e=t),s=e,SetCamFov(a,e)}(),IsControlJustPressed(0,26)&&(SetCamRot(a,0,0,GetEntityHeading((0,n.getHelicopter)()),0),SetCamFov(a,70)),IsControlJustPressed(0,22)&&function(){if(l){l=null;const e=GetCamRot(a,2),t=GetCamFov(a);return c(!0),d(!0),SetCamRot(a,e[0],e[1],e[2],2),SetCamFov(a,t),(0,n.playTimedSound)("Warning_Alarm_Loop","DLC_H4_Submarine_Crush_Depth_Sounds",4),void(0,n.showNui)()}const e=(0,n.getVehicleInCameraView)(a);e&&(l=e,PointCamAtEntity(a,e,0,0,0,!0),(0,n.showNuiWithTargetingVehicle)(),PlaySoundFrontend(-1,"5_SEC_WARNING","HUD_MINI_GAME_SOUNDSET",!1))}();const e=(0,n.getHelicopter)(),t=GetEntityCoords(e,!0),o=GetCamRot(a,2);BeginScaleformMovieMethod(r,"SET_ALT_FOV_HEADING"),ScaleformMovieMethodAddParamFloat(t[2]),ScaleformMovieMethodAddParamFloat(1/70*(GetCamFov(a)-5)),ScaleformMovieMethodAddParamFloat(o[2]),EndScaleformMovieMethod(),DrawScaleformMovieFullscreen(r,255,255,255,255,0)},t.turnOffCamera=c,t.turnOnCamera=d},737:(e,t,o)=>{const n=o(847),i=o(238),r=o(832);let a=!1,s=!1;on("gameEventTriggered",((e,t)=>{if("CEventNetworkPlayerEnteredVehicle"!==e)return;if(s)return;s=!0;const o=t[1];if(!(0,r.isSupportedHelicopter)(o))return;const n=PlayerPedId();GetVehiclePedIsIn(n,!1)===o&&(a=!0,(0,r.showNui)())})),setTick((()=>{if(s&&!IsPedInAnyVehicle(PlayerPedId(),!1)&&(s=!1),(a&&!IsPedInAnyVehicle(PlayerPedId(),!1)||IsPlayerDead(PlayerId()))&&((0,r.hideNui)(),a=!1),(0,n.cameraIsTurnedOn)()&&(0,n.watchCamera)(),IsControlJustPressed(0,38)&&(0,r.isInSupportedHelicopter)()){const e=PlayerPedId(),t=GetVehiclePedIsIn(e,!1);if(0!==(0,r.getSeatPlayerIsIn)(e,t)||(0,n.cameraIsTurnedOn)())return void(0,n.turnOffCamera)(!1);(0,n.turnOnCamera)(!1)}IsControlJustPressed(0,25)&&(0,r.isInSupportedHelicopter)()&&(0,i.toggleStaticSpotlight)(),(0,i.watchSpotlights)()})),onNet("police-helicopter:spotlight",(e=>{(0,i.updateSpotlights)(e)}))},238:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.watchSpotlights=t.updateSpotlights=t.toggleStaticSpotlight=void 0;const n=o(832);let i=!1;t.toggleStaticSpotlight=function(){i=!i,emitNet("police-helicopter:spotlight",{helicopterNetworkId:NetworkGetNetworkIdFromEntity((0,n.getHelicopter)()),enable:i})};const r={};t.updateSpotlights=function(e){const t=NetworkGetEntityFromNetworkId(e.helicopterNetworkId);e.enable&&DoesEntityExist(t)?r[t]=e:delete r[t]},t.watchSpotlights=function(){Object.keys(r).forEach((e=>{const t=r[e],o=NetworkGetEntityFromNetworkId(t.helicopterNetworkId);DoesEntityExist(o)?function(e){const t=GetEntityCoords(e,!0),o=GetEntityCoords(PlayerPedId(),!0);if(Vdist(t[0],t[1],t[2],o[0],o[1],o[2])>500)return;const i=GetEntityRotation(e,2),r=(0,n.calculateDirection)({x:i[0]-20,y:i[1],z:i[2]});DrawSpotLight(t[0],t[1],t[2],r.x,r.y,r.z,255,255,255,300,9,4,10,75)}(o):delete r[o]}))}},832:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.hideNui=t.showNuiWithTargetingVehicle=t.showNuiWithCameraTooltip=t.showNui=t.getSeatPlayerIsIn=t.playTimedSound=t.wait=t.getVehicleInCameraView=t.calculateDirection=t.hideHud=t.seatIsAllowedToUseCamera=t.getHelicopter=t.isInSupportedHelicopter=t.isSupportedHelicopter=t.getSupportedHelicopters=void 0;const n=[];function i(){return n}function r(e){return i().includes(e)}function a(){return GetVehiclePedIsIn(PlayerPedId(),!1)}["polmav"].forEach((e=>{n.push(GetHashKey(e))})),t.getSupportedHelicopters=i,t.isSupportedHelicopter=r,t.isInSupportedHelicopter=function(){const e=PlayerPedId();return!IsPlayerDead(PlayerId())&&IsPedInAnyVehicle(e,!1)&&r(GetEntityModel(GetVehiclePedIsIn(e,!1)))},t.getHelicopter=a,t.seatIsAllowedToUseCamera=function(){const e=PlayerPedId(),t=a();return GetPedInVehicleSeat(t,-1)==e||GetPedInVehicleSeat(t,0)==e};const s=[1,2,3,4,6,7,8,9,13,11,12,15,18,19];t.hideHud=function(){HideHelpTextThisFrame(),HideHudAndRadarThisFrame(),s.forEach((e=>{HideHudComponentThisFrame(e)}))};const l=Math.PI;function c(e){return e*(l/180)}function d(e,t,o){return{x:e,y:t,z:o}}function u(e){const t=d(c(e.x),c(e.y),c(e.z));return d(-Math.sin(t.z)*Math.abs(Math.cos(t.x)),Math.cos(t.z)*Math.abs(Math.cos(t.x)),Math.sin(t.x))}function h(e){return new Promise((t=>setTimeout(t,1e3*e)))}function p(e,t){for(let o=-1;o<GetVehicleMaxNumberOfPassengers(t);o++)if(GetPedInVehicleSeat(t,o)===e)return o;return null}t.calculateDirection=u,t.getVehicleInCameraView=function(e){const t=GetCamCoord(e),o=GetCamRot(e,2),n=u({x:o[0],y:o[1],z:o[2]}),i={x:t[0]+950*n.x,y:t[1]+950*n.y,z:t[2]+950*n.z},r=StartShapeTestRay(t[0],t[1],t[2],i.x,i.y,i.z,350,a(),4),[s,l,c,d,h]=GetShapeTestResult(r);return l&&IsEntityAVehicle(h)?h:null},t.wait=h,t.playTimedSound=function(e,t,n){return o(this,void 0,void 0,(function*(){const o=GetSoundId();PlaySoundFrontend(o,e,t,!1),yield h(n),StopSound(o),ReleaseSoundId(o)}))},t.getSeatPlayerIsIn=p,t.showNui=function(){const e=PlayerPedId(),t=p(e,GetVehiclePedIsIn(e,!1));SendNuiMessage(JSON.stringify({type:"show",isDriver:-1===t,isCoPilot:0===t,targetingVehicle:!1,showCameraTooltip:!1}))},t.showNuiWithCameraTooltip=function(){const e=PlayerPedId(),t=p(e,GetVehiclePedIsIn(e,!1));SendNuiMessage(JSON.stringify({type:"show",isDriver:-1===t,isCoPilot:0===t,targetingVehicle:!1,showCameraTooltip:!0}))},t.showNuiWithTargetingVehicle=function(){const e=PlayerPedId(),t=p(e,GetVehiclePedIsIn(e,!1));SendNuiMessage(JSON.stringify({type:"show",isDriver:-1===t,isCoPilot:0===t,targetingVehicle:!0,showCameraTooltip:!0}))},t.hideNui=function(){SendNuiMessage(JSON.stringify({type:"hide"}))}}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}o(737),o(847),o(832),o(238)})();